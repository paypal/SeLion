<div class="selion-content-div">
  <h1 id="getting-started-with-seLion" class="page-header">Mobile Automation</h1>

  <p class="lead">How to create a mobile test using SeLion.</p>

  <h2 id="prerequisites">Prerequisites</h2>
  <p>Make sure the following software is installed before you start:</p>
  <ol>
      <li><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html">Java JDK 1.7</a></li>
      <li><a href="http://maven.apache.org/download.html">Maven 3</a></li>
      <li>Xcode 5.1.1+ (Mac installs only, required for iOS tests) and/or the Android SDK (for Android tests)
        <ul>
          <li>For full details on how to setup your Mac for iOS testing with ios-driver, refer to their
            <a href="http://ios-driver.github.io/ios-driver/?page=setup#tech">project site</a>.</li>
          <li>For full details on how to setup your machine for Android testing with Selendroid, refer to their
            <a href="http://selendroid.io/setup.html">project site</a>.</li>
          <li>For details on how to setup your machine with Appium for Android and/or iOS testing, refer to their
            <a href="http://appium.io/getting-started.html?lang=en">project site</a>.</li>
        </ul>
      </li>
  </ol>

  <h2 id="project-creation">Create a Sample Project</h2>
  <p class="alert-info">Note: This step is optional and does not need to be completed if you already have a Maven project.</p>
  <p>Once you have satisfied all of the prerequisites, open a command prompt and navigate to the directory where you
    want your project to be located, and run:</p>

  <pre data-src="../sample-files/gettingstarted-sample1.sh"></pre>
  <br>
  <p>The sample project will automatically be generated from the Maven archetype. You will see something like this:</p>

  <pre data-src="../sample-files/gettingstarted-sample2.txt"></pre>
  <h2>Update the POM File</h2>
  <p>Update the pom.xml file as below:</p>
  <ol>
    <li>Add SeLion artifacts in the dependency section.</li>
    <li>Add Maven surefire plugin in the build section.</li>
    <li>Remove the JUnit dependency (it is not needed).</li>
    <li>If you want to use a SeLion SNAPSHOT, add the Sonatype nexus snapshot repository information</li>
  </ol>

  <p>Here is how your POM file would look like after all the above mentioned updates have been done:</p>

  <pre data-src="../sample-files/gettingstarted-sample3.xml"></pre>
  <p>Now run the following command in the project directory path from a command prompt:</p>
  <pre><code class="language-sh">mvn dependency:resolve</code></pre>
  <p>This command causes Maven to start downloading all of the required jar files.</p>

  <h2>Creating Appium @MobileTest Cases</h2>
  <p>For the purpose of demonstration, we are going to use a sample iOS native application from Apple called
    <a href="http://ios-driver.github.io/ios-driver/files/InternationalMountains.app.zip">International Mountains</a>
    and an Android native application from Selendroid called
    <a href="http://search.maven.org/remotecontent?filepath=io/selendroid/selendroid-test-app/0.15.0/selendroid-test-app-0.15.0.apk">Selendroid Test App</a>.
   </p>
  <p>Executing an Appium test case needs a running Appium instance. Configration parameter <code>mobileNodeType</code> should
    be set to <i>appium</i> for running an Appium test case in SeLion.</p>

  <h4>Creating an Appium iOS @MobileTest for Native App</h4>
  <p>Create the file <samp>AppiumIOSNativeAppMobileDemo.java</samp> under
      the folder <code>{project}/src/test/java/com/mycompany/test</code> and copy the below contents:</p>
  <pre data-src="../sample-files/appiumiosnativemobile-sample.java"></pre>

  <h4>Creating an Appium iOS @MobileTest for Safari</h4>
  <p>Create the file <samp>AppiumIOSSafariMobileDemo.java</samp> under
      the folder <code>{project}/src/test/java/com/mycompany/test</code> and copy the below contents:</p>
  <pre data-src="../sample-files/appiumiossafarimobile-sample.java"></pre>

  <h4>Creating an Appium Android @MobileTest for Native App</h4>
  <p>Create the file <samp>AppiumAndroidNativeAppMobileDemo.java</samp> under
      the folder <code>{project}/src/test/java/com/mycompany/test</code> and copy the below contents:</p>
  <pre data-src="../sample-files/appiumandroidnativemobile-sample.java"></pre>

  <h4>Creating an Appium Android @MobileTest for Browser</h4>
  <p>Create the file <samp>AppiumAndroidBrowserMobileDemo.java</samp> under
      the folder <code>{project}/src/test/java/com/mycompany/test</code> and copy the below contents:</p>
  <pre data-src="../sample-files/appiumandroidbrowsermobile-sample.java"></pre>

  <h4>Create a TestNG Suite File to Execute the Test Cases</h4>
  <p>
    SeLion uses <a href="http://www.testng.org">TestNG</a> as the test runner. First, create the folder
    <code>{project}/src/test/resources</code>. Then, create the TestNG Suite file <samp>AppiumSampleSuite.xml</samp>
    under the folder <code>{project}/src/test/resources</code> and copy the below contents:
  </p>

  <pre data-src="../sample-files/appiumsuite-sample.xml"></pre>

  <h2>Creating Appium @MobileTest Cases to Run On the Sauce Cloud</h2>

  <h4>Native App Test Case</h4>
  <p>This test case executes the mobile automation on the Sauce Cloud. The
    <a href="http://search.maven.org/remotecontent?filepath=io/selendroid/selendroid-test-app/0.15.0/selendroid-test-app-0.15.0.apk">Selendroid Test App</a>
    should be uploaded to Sauce Cloud before trying this test case. Refer to the
    <a href="https://docs.saucelabs.com/reference/rest-api/#upload-file">Sauce Cloud upload API</a> for more information
    on uploading it to the Sauce temporary storage. Create the file <samp>AppiumNativeAppSauceCloudMobileDemo.java</samp>
    under the folder <code>{project}/src/test/java/com/mycompany/test</code> and copy the below contents:</p>
  <pre data-src="../sample-files/appiumnativeapponsaucecloudmobile-sample.java"></pre>

  <h4>Safari Test Case</h4>
  <p>This test case execute the mobile automation on Sauce Cloud. Create the file <samp>AppiumIOSSafariSauceCloudMobileDemo.java</samp>
    under the folder <code>{project}/src/test/java/com/mycompany/test</code> and copy the below contents:</p>
  <pre data-src="../sample-files/appiumnsafarionsaucecloudmobile-sample.java"></pre>

  <h4>Create a TestNG Suite file to Execute the Test Cases on the Sauce Cloud</h4>
  <p>
    SeLion uses <a href="http://www.testng.org">TestNG</a> as the test runner. First, create the folder
    <code>{project}/src/test/resources</code>. Then, create a TestNG Suite file <samp>AppiumSauceSampleSuite.xml</samp>
    under the folder <code>{project}/src/test/resources</code> and copy the below contents:
  </p>
  <pre data-src="../sample-files/appiumsaucesuite-sample.xml"></pre>


  <h2>Creating an ios-driver @MobileTest</h2>
  <p>Download and extract the
      <a href="http://ios-driver.github.io/ios-driver/files/InternationalMountains.app.zip">International Mountains</a>
    app to <samp>{project}/Applications</samp>.</p>
  <p>Executing an ios-driver @MobileTest locally can only be done on a Mac. Create the file <samp>IOSMobileDemo.java</samp> under
      the folder <code>{project}/src/test/java/com/mycompany/test</code> and copy the below contents:</p>
  <pre data-src="../sample-files/gettingstartedmobile-sample2.java"></pre>

  <h2>Creating a Selendroid @MobileTest</h2>
  <p> Download the <a href="http://search.maven.org/remotecontent?filepath=io/selendroid/selendroid-test-app/0.15.0/selendroid-test-app-0.15.0.apk">Selendroid Test App</a>
    file into <samp>{project}/Applications</samp></p>
  <p>Create the file <samp>AndroidMobileDemo.java</samp> under the folder <code>{project}/src/test/java/com/mycompany/test</code>
      and copy the below contents:</p>
  <pre data-src="../sample-files/gettingstartedmobile-sample3.java"></pre>

  <h2>Create a TestNG Suite File to Execute the Tests Cases</h2>
  <p>
    SeLion uses <a href="http://www.testng.org">TestNG</a> as the test runner. First, create the folder
    <code>{project}/src/test/resources</code>. Then, create a TestNG Suite file <samp>SampleSuite.xml</samp> under the folder
    <code>{project}/src/test/resources</code> and copy the below contents:
  </p>
  <pre data-src="../sample-files/gettingstartedmobile-sample1.xml"></pre>

  <h2>Execute the Test</h2>
  <p>To execute the test, run the following command from the <code>{project}</code> directory:</p>
  <pre><code class="language-sh">mvn clean test -DsuiteXmlFile=src/test/resources/SampleSuite.xml</code></pre>

  <br>
  <p><b>Congratulations! You just implemented your first automated mobile test using SeLion !</b></p>

  <h2>Additional Considerations for a @MobileTest</h2>
  <p>As seen from the above sample, a test can specify the application that it is trying to automate.
    There are a couple of things that can be specified via the <code>@MobileTest</code> annotation. For example:</p>
    <ol>
      <li><code>appName</code> - The application name against which the automation test needs to be run. For all default
        apps this is mandatory</li>
      <li><code>appPath</code> - The application path against which the automation test needs to be run. For all Appium based
        native app testing this is mandatory </li>
      <li><code>mobileNodeType</code> - The mobile driver that can be used to execute the mobile tests.
        Possible values are <i>appium</i>, <i>ios-driver</i> and <i>selendroid</i>.</li>
      <li><code>device</code> - The device type to be used. E.g. - an iPhone, an iPad, an Android device, etc</li>
      <li><code>language</code> - The application's language that is to be used.</li>
      <li><code>locale</code> - The application's locale that is to be used.</li>
    </ol>
  <p>Refer to the SeLion <a href="java-docs/1.2.0/client-apis/index.html">client javadocs</a> for the complete list of annotation
    parameters.</p>

  <p>Some of the defaults attributes for the <code>@MobileTest</code> annotation can be influenced via Java system
    properties, environment variables, or via TestNG suite parameters. </p>
    <table class="table table-bordered table-hover table-condensed">
      <thead>
      <tr>
        <th>
          TestNG Suite parameter
        </th>
        <th>
          JVM System Property / Environment Variable
        </th>
        <th>
          Description
        </th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td><code>appFolder</code></td>
        <td><code>SELION_MOBILE_APP_FOLDER</code></td>
        <td>Represents the location of a folder which contains the mobile applications (.app and .apk files) under test.
          <b>This is applicable only for local runs</b>.</td>
      </tr>
      <tr>
        <td><code>appName</code></td>
        <td><code>SELION_MOBILE_APP_NAME</code></td>
        <td>Override the default name of the application that is to be used for running tests. If nothing is specified, it
          defaults to <code>""</code></td>
      </tr>
	  <tr>
        <td><code>appPath</code></td>
        <td><code>SELION_MOBILE_APP_PATH</code></td>
        <td>Override the path of the application that is to be used for running tests. If nothing is specified, it
          defaults to <code>""</code></td>
      </tr>
      <tr>
        <td><code>appLanguage</code></td>
        <td><code>SELION_MOBILE_APP_LANGUAGE</code></td>
        <td>Override the default language to be used for running tests. If nothing is specified, it defaults to
          <code>en</code> (English)</td>
      </tr>
      <tr>
        <td><code>appLocale</code></td>
        <td><code>SELION_MOBILE_APP_LOCALE</code></td>
        <td>Override the default locale to be used for running tests. If nothing is specified, it defaults to
          <code>en_US</code> (US English)</td>
      </tr>
      <tr>
          <td><code>mobileNodeType</code></td>
          <td><code>SELION_MOBILE_NODE_TYPE</code></td>
          <td>Override the default mobile node type to be used for running tests. If nothing is specified, it defaults to
              <code>""</code></td>
      </tr>
      <tr>
          <td><code>mobileDevice</code></td>
          <td><code>MOBILE_DEVICE</code></td>
          <td>Override the default mobile device and platform version to be used for running tests. If nothing is specified, it defaults to
              <code>""</code></td>
      </tr>
      <tr>
          <td><code>mobileDeviceType</code></td>
          <td><code>MOBILE_DEVICE_TYPE</code></td>
          <td>Override the default mobile device type to be used for running tests. If nothing is specified, it defaults to
              <code>""</code></td>
      </tr>
      </tbody>
    </table>
</div>

<script src="../js/prismjs-min.js"></script>
